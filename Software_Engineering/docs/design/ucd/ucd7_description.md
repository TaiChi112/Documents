# Use Case Description: แก้ไขรายวิชา

## UCD 07: Edit Courses

| รายการ | รายละเอียด |
|--------|------------|
| Use Case Name | แก้ไขรายวิชา (Edit Courses) |
| Actor | Professor, Admin |
| Description | กระบวนการแก้ไขข้อมูลรายวิชาที่มีอยู่แล้วในระบบ |
| Pre-condition | - อาจารย์หรือผู้ดูแลระบบเข้าสู่ระบบสำเร็จแล้ว<br>- มีรายวิชาที่ต้องการแก้ไขอยู่ในระบบ |
| Post-condition | - ข้อมูลรายวิชาถูกปรับปรุงให้เป็นปัจจุบัน |

## Use Cases ย่อย

### UC1: Edit Courses
- **Actor**: Professor, Admin
- **Description**: เลือกรายวิชาที่ต้องการแก้ไข
- **Pre-condition**: อาจารย์หรือผู้ดูแลระบบอยู่ที่หน้าจัดการรายวิชา
- **Post-condition**: ระบบแสดงหน้าฟอร์มสำหรับแก้ไขข้อมูลรายวิชา
- **Relationship**: เชื่อมโยงไปยัง UC2 (Show Course Information On Form For Edit) แบบ include

### UC2: Show Course Information On Form For Edit
- **Actor**: Professor, Admin
- **Description**: แสดงข้อมูลรายวิชาที่มีอยู่แล้วบนฟอร์มสำหรับการแก้ไข
- **Pre-condition**: อาจารย์หรือผู้ดูแลระบบเลือกรายวิชาที่ต้องการแก้ไข
- **Post-condition**: ระบบแสดงข้อมูลรายวิชาบนฟอร์มการแก้ไข
- **Relationship**: เชื่อมโยงไปยัง UC3 (Input Course Information Which Needs Editing) แบบ include

### UC3: Input Course Information Which Needs Editing
- **Actor**: Professor, Admin
- **Description**: แก้ไขข้อมูลรายวิชาส่วนที่ต้องการเปลี่ยนแปลง
- **Pre-condition**: ระบบแสดงข้อมูลรายวิชาบนฟอร์มการแก้ไข
- **Post-condition**: อาจารย์หรือผู้ดูแลระบบแก้ไขข้อมูลเรียบร้อย
- **Relationship**: เชื่อมโยงไปยัง UC4 (Validate Course Information) แบบ include

### UC4: Validate Course Information
- **Actor**: Professor, Admin
- **Description**: ระบบตรวจสอบความถูกต้องและครบถ้วนของข้อมูลรายวิชาที่แก้ไข
- **Pre-condition**: อาจารย์หรือผู้ดูแลระบบแก้ไขข้อมูลและยืนยันการแก้ไข
- **Post-condition**: ระบบแสดงผลการตรวจสอบข้อมูล
- **Relationship**: เชื่อมโยงกับ UC5 (Course Information Correct) และ UC6 (Course Information Incorrect)

### UC5: Course Information Correct
- **Actor**: Professor, Admin
- **Description**: ข้อมูลรายวิชาที่แก้ไขถูกต้องและครบถ้วน
- **Pre-condition**: ระบบตรวจสอบข้อมูลรายวิชาแล้วพบว่าถูกต้อง
- **Post-condition**: ระบบพร้อมบันทึกการเปลี่ยนแปลง
- **Relationship**: เชื่อมโยงไปยัง UC8 (Save Course Information into Database) แบบ include

### UC6: Course Information Incorrect
- **Actor**: Professor, Admin
- **Description**: ข้อมูลรายวิชาที่แก้ไขไม่ถูกต้องหรือไม่ครบถ้วน
- **Pre-condition**: ระบบตรวจสอบข้อมูลรายวิชาแล้วพบข้อผิดพลาด
- **Post-condition**: ระบบรอการแก้ไขข้อมูล
- **Relationship**: เชื่อมโยงไปยัง UC7 (Display Error Message) แบบ include

### UC7: Display Error Message
- **Actor**: Professor, Admin
- **Description**: แสดงข้อความแจ้งเตือนข้อผิดพลาดของข้อมูลรายวิชา
- **Pre-condition**: ระบบตรวจพบข้อผิดพลาดในข้อมูลรายวิชา
- **Post-condition**: อาจารย์หรือผู้ดูแลระบบทราบถึงข้อผิดพลาดและสามารถแก้ไขได้

### UC8: Save Course Information into Database
- **Actor**: Professor, Admin
- **Description**: บันทึกข้อมูลรายวิชาที่แก้ไขลงในฐานข้อมูลของระบบ
- **Pre-condition**: ข้อมูลรายวิชาที่แก้ไขถูกต้องและครบถ้วน
- **Post-condition**: ข้อมูลรายวิชาถูกปรับปรุงในฐานข้อมูล
- **Relationship**: เชื่อมโยงไปยัง UC9 (List Courses) แบบ include

### UC9: List Courses
- **Actor**: Professor, Admin
- **Description**: กลับไปยังหน้ารายการวิชาทั้งหมด
- **Pre-condition**: ข้อมูลรายวิชาถูกบันทึกลงในฐานข้อมูลสำเร็จ
- **Post-condition**: ระบบแสดงหน้ารายการวิชาที่มีข้อมูลอัปเดตแล้ว
- **Relationship**: ถูกเรียกใช้จาก UC8 (Save Course Information into Database) แบบ include

## Basic Flow
1. อาจารย์หรือผู้ดูแลระบบเลือกรายวิชาที่ต้องการแก้ไขจากรายการวิชาทั้งหมด
2. ระบบแสดงฟอร์มสำหรับแก้ไขข้อมูลรายวิชาพร้อมข้อมูลที่มีอยู่แล้ว
3. อาจารย์หรือผู้ดูแลระบบแก้ไขข้อมูลรายวิชาส่วนที่ต้องการเปลี่ยนแปลง
4. อาจารย์หรือผู้ดูแลระบบยืนยันการแก้ไขข้อมูล
5. ระบบทำการตรวจสอบความถูกต้องและครบถ้วนของข้อมูล
6. หากข้อมูลถูกต้อง ระบบจะบันทึกการเปลี่ยนแปลงลงในฐานข้อมูล
7. ระบบแสดงข้อความยืนยันการแก้ไขสำเร็จ
8. ระบบกลับไปยังหน้ารายการวิชาทั้งหมด

## Alternative Flow
- **กรณีที่ 1**: อาจารย์หรือผู้ดูแลระบบแก้ไขข้อมูลไม่ครบถ้วน
  1. ระบบแสดงข้อความแจ้งเตือนให้กรอกข้อมูลที่จำเป็น
  2. ระบบไฮไลท์ช่องกรอกข้อมูลที่มีปัญหา
  3. อาจารย์หรือผู้ดูแลระบบแก้ไขข้อมูลเพิ่มเติม
  4. ระบบตรวจสอบข้อมูลอีกครั้ง
  
- **กรณีที่ 2**: อาจารย์หรือผู้ดูแลระบบต้องการยกเลิกการแก้ไขรายวิชา
  1. อาจารย์หรือผู้ดูแลระบบคลิกที่ปุ่ม "ยกเลิก"
  2. ระบบแสดงข้อความยืนยันการยกเลิก
  3. หากยืนยัน ระบบจะยกเลิกการแก้ไขและกลับไปยังหน้ารายการวิชาทั้งหมด

## Exception Flow
- **รหัสวิชาซ้ำกับรายวิชาอื่น**:
  1. ระบบตรวจพบว่ารหัสวิชาที่แก้ไขซ้ำกับรายวิชาอื่นที่มีอยู่แล้ว
  2. ระบบแสดงข้อความแจ้งเตือนว่ามีรายวิชาที่ใช้รหัสนี้อยู่แล้ว
  3. ระบบไฮไลท์ช่องกรอกรหัสวิชา
  4. อาจารย์หรือผู้ดูแลระบบต้องเปลี่ยนรหัสวิชาหรือยกเลิกการแก้ไข
  
- **การเชื่อมต่อฐานข้อมูลมีปัญหา**:
  1. ระบบไม่สามารถบันทึกข้อมูลรายวิชาลงในฐานข้อมูลได้
  2. ระบบแสดงข้อความแจ้งเตือนว่าไม่สามารถบันทึกข้อมูลได้
  3. ระบบบันทึกข้อมูลการแก้ไขไว้ชั่วคราว
  4. ระบบแนะนำให้ลองใหม่อีกครั้งหรือติดต่อผู้ดูแลระบบ

## ข้อจำกัดในการแก้ไขรายวิชา

### สำหรับอาจารย์
1. สามารถแก้ไขได้เฉพาะรายวิชาที่ตนเองรับผิดชอบ
2. ไม่สามารถแก้ไขรหัสวิชาได้
3. สามารถแก้ไขรายละเอียดเนื้อหา เอกสารประกอบการสอน และวิธีการวัดผล
4. สามารถเปลี่ยนแปลงวัน-เวลา และห้องเรียนได้เฉพาะช่วงก่อนเปิดภาคการศึกษา

### สำหรับผู้ดูแลระบบ
1. สามารถแก้ไขรายวิชาทั้งหมดในระบบได้
2. สามารถแก้ไขรหัสวิชาได้ (หากยังไม่มีนักศึกษาลงทะเบียน)
3. สามารถเปลี่ยนอาจารย์ผู้สอนได้
4. สามารถเปลี่ยนแปลงวัน-เวลา และห้องเรียนได้ตลอดเวลา
5. สามารถยกเลิกรายวิชาหรือเปลี่ยนสถานะรายวิชาได้

## Special Requirements
- ระบบควรมีการเก็บประวัติการแก้ไขรายวิชาเพื่อการตรวจสอบย้อนหลัง
- ระบบควรแจ้งเตือนนักศึกษาที่ลงทะเบียนในรายวิชาเมื่อมีการเปลี่ยนแปลงข้อมูลสำคัญ
- ระบบควรมีการล็อกไม่ให้แก้ไขข้อมูลบางส่วนหลังจากเริ่มภาคการศึกษา
- ระบบควรมีฟังก์ชันเปรียบเทียบข้อมูลก่อนและหลังการแก้ไข
- ระบบควรมีการตรวจสอบความขัดแย้งของตารางเรียนเมื่อมีการเปลี่ยนวัน-เวลาเรียน